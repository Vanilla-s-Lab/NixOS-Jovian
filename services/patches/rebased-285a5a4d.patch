diff --git a/cogl/meson.build b/cogl/meson.build
index a87cd18..e73f1a8 100644
--- a/cogl/meson.build
+++ b/cogl/meson.build
@@ -31,7 +31,7 @@ cogl_pkg_private_deps = [
 
 if have_profiler
   cogl_pkg_private_deps += [
-    sysprof_dep,
+    libsysprof_capture_dep,
   ]
 endif
 
diff --git a/meson.build b/meson.build
index 6a31037..5ab78ab 100644
--- a/meson.build
+++ b/meson.build
@@ -401,7 +401,7 @@ endif
 have_profiler = get_option('profiler')
 if have_profiler
   # libsysprof-capture support
-  sysprof_dep = dependency('sysprof-capture-4',
+  libsysprof_capture_dep = dependency('sysprof-capture-4',
     required: true,
     default_options: [
       'enable_examples=false',
@@ -414,6 +414,13 @@ if have_profiler
     ],
     fallback: ['sysprof', 'libsysprof_capture_dep'],
   )
+
+  if libsysprof_capture_dep.type_name() == 'pkgconfig'
+    sysprof_dep = dependency('sysprof-4')
+    sysprof_dbus_interfaces_dir = join_paths(sysprof_dep.get_pkgconfig_variable('datadir'), 'dbus-1', 'interfaces')
+  else
+    sysprof_dbus_interfaces_dir = join_paths(mutter_srcdir, 'subprojects', 'sysprof', 'src')
+  endif
 endif
 
 required_functions = [
diff --git a/src/meson.build b/src/meson.build
index 063c06b..bca91eb 100644
--- a/src/meson.build
+++ b/src/meson.build
@@ -881,12 +881,6 @@ if have_profiler
     'core/meta-profiler.h',
   ]
 
-  if sysprof_dep.type_name() == 'pkgconfig'
-    sysprof_dbus_interfaces_dir = join_paths(sysprof_dep.get_variable('datadir'), 'dbus-1', 'interfaces')
-  else
-    sysprof_dbus_interfaces_dir = join_paths(mutter_srcdir, 'subprojects', 'sysprof', 'src')
-  endif
-
   sysprof3_dbus_file = join_paths(sysprof_dbus_interfaces_dir, 'org.gnome.Sysprof3.Profiler.xml')
   dbus_sysprof3_profiler_built_sources = gnome.gdbus_codegen('meta-dbus-sysprof3-profiler',
       sysprof3_dbus_file,
